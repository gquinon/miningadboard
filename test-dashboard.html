<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard</title>
</head>
<body>
    <h1>Test Dashboard - Verificaci√≥n de Funciones</h1>
    
    <div id="test-results">
        <h2>Resultados de Prueba:</h2>
        <div id="results"></div>
    </div>

    <script>
        console.log('üß™ Iniciando pruebas del dashboard...');
        
        // Simular datos de Firebase
        window.projects = [
            {
                name: "Proyecto Test 1",
                sector: "Cobre",
                area: "Regi√≥n Test",
                pa√≠s: "Chile",
                etapa: "Producci√≥n",
                companias: ["Empresa A", "Empresa B"],
                capex: 1500,
                tipo: "Expansi√≥n",
                productos: "Cobre concentrado",
                estado: "Activo",
                coordinates: [-24.5, -69.25],
                descripcion: "Proyecto de prueba"
            },
            {
                name: "Proyecto Test 2",
                sector: "Litio",
                area: "Salar Test",
                pa√≠s: "Chile",
                etapa: "Desarrollo",
                companias: ["Empresa C"],
                capex: 2000,
                tipo: "Nuevo",
                productos: "Litio",
                estado: "En desarrollo",
                coordinates: [-23.8, -68.2],
                descripcion: "Segundo proyecto de prueba"
            }
        ];
        
        // Simular elementos del DOM
        document.body.innerHTML += `
            <div id="total-projects">0</div>
            <div id="total-capex">0</div>
            <div id="active-projects">0</div>
            <div id="notification" style="display: none;">
                <span id="notification-message"></span>
            </div>
        `;
        
        // Cargar firebase-ultra-simple.js
        const script = document.createElement('script');
        script.src = 'firebase-ultra-simple.js';
        script.onload = function() {
            console.log('‚úÖ firebase-ultra-simple.js cargado');
            
            // Verificar despu√©s de 3 segundos
            setTimeout(() => {
                const results = document.getElementById('results');
                const totalEl = document.getElementById('total-projects');
                const capexEl = document.getElementById('total-capex');
                const activeEl = document.getElementById('active-projects');
                
                results.innerHTML = `
                    <p><strong>Total Proyectos:</strong> ${totalEl.textContent}</p>
                    <p><strong>Total CAPEX:</strong> ${capexEl.textContent}</p>
                    <p><strong>Proyectos Activos:</strong> ${activeEl.textContent}</p>
                    <p><strong>window.projects length:</strong> ${window.projects ? window.projects.length : 'undefined'}</p>
                `;
                
                if (totalEl.textContent !== '0') {
                    results.innerHTML += '<p style="color: green;">‚úÖ KPIs actualizados correctamente</p>';
                } else {
                    results.innerHTML += '<p style="color: red;">‚ùå KPIs no se actualizaron</p>';
                }
            }, 3000);
        };
        
        document.head.appendChild(script);
    </script>
</body>
</html>